<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>jquery-domchange by colbin8r</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>jquery-domchange</h1>
        <h2>Simple jQuery plugin to add support for DOM change events.</h2>
        <a href="https://github.com/colbin8r/jquery-domchange" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a id="jquery-domchange" class="anchor" href="#jquery-domchange" aria-hidden="true"><span class="octicon octicon-link"></span></a>jquery-domchange</h1>

<p>jquery-domchange is a simple jQuery plugin to add support for DOM change events using jQuery's built-in special event system. There's no need for anything fancy--just start listening to the <code>domchange</code> event.</p>

<div class="highlight highlight-js"><pre>$(<span class="pl-s1"><span class="pl-pds">"</span>#observable<span class="pl-pds">"</span></span>).on(<span class="pl-s1"><span class="pl-pds">"</span>domchange<span class="pl-pds">"</span></span>, <span class="pl-st">function</span>(<span class="pl-vpf">event</span>, <span class="pl-vpf">changes</span>) {
    <span class="pl-c">// do something with the changes</span>
});</pre></div>

<h3>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h3>

<p>You can simply listen for the <code>domchange</code> event as you would with any other event:</p>

<div class="highlight highlight-js"><pre>$(<span class="pl-s1"><span class="pl-pds">"</span>#observable<span class="pl-pds">"</span></span>).on(<span class="pl-s1"><span class="pl-pds">"</span>domchange<span class="pl-pds">"</span></span>, <span class="pl-st">function</span>(<span class="pl-vpf">event</span>, <span class="pl-vpf">changes</span>) {
    <span class="pl-c">// something happened to the DOM!    </span>
}</pre></div>

<p>The event handler is passed (along with the usual <code>event</code> details) a list of DOM changes, each of which is a <a href="https://dom.spec.whatwg.org/#mutationrecord"><code>MutationRecord</code></a>. Each <code>MutationRecord</code> contains details about the specific change to the DOM, including the type of change, the affected element, etc. You can find out exactly what it contains by <a href="https://dom.spec.whatwg.org/#mutationrecord">looking at its API</a>.</p>

<p>Although the plugin's defaults suffice for most scenarios, you may want to specify some configuration options to help improve performance. When adding your event listener, you can pass in an object to configure the kinds of changes you want to listen to:</p>

<div class="highlight highlight-js"><pre>$(<span class="pl-s1"><span class="pl-pds">"</span>#observable<span class="pl-pds">"</span></span>).on(<span class="pl-s1"><span class="pl-pds">"</span>domchange<span class="pl-pds">"</span></span>,
    {
        descendents<span class="pl-k">:</span> <span class="pl-c1">false</span>,
        recordPriorValues<span class="pl-k">:</span> {
            attributes<span class="pl-k">:</span> <span class="pl-c1">true</span>
        }
    },
    <span class="pl-st">function</span>() {
        <span class="pl-c">// something happened to the DOM!    </span>
    }
);</pre></div>

<h3>
<a id="quick-option-reference" class="anchor" href="#quick-option-reference" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quick Option Reference</h3>

<ul>
<li>
<strong>events</strong>

<ul>
<li>
<strong>attributes</strong> (<em>true</em>): listen to attribute change events</li>
<li>
<strong>children</strong> (<em>true</em>): listen to childList change events</li>
<li>
<strong>characterData</strong> (<em>true</em>): listen to characterData change events</li>
</ul>
</li>
<li>
<strong>descendents</strong> (<em>true</em>): watch for changes to the element's children as well as the element</li>
<li>
<strong>recordPriorValues</strong>

<ul>
<li>
<strong>attributes</strong> (<em>false</em>): record the old value when the element's attribute is changed; if present, attribute events will always be recorded</li>
<li>
<strong>characterData</strong> (<em>false</em>): record the old value when the element's character data is changed; if present, characterData events will always be recorded</li>
</ul>
</li>
<li>
<strong>attributeFilter</strong> (<em>null</em>): listen only to attributes whitelisted here; set to a list (array) of attribute names; if present, attribute events will always be recorded</li>
</ul>

<h3>
<a id="options" class="anchor" href="#options" aria-hidden="true"><span class="octicon octicon-link"></span></a>Options</h3>

<h4>
<a id="change-types" class="anchor" href="#change-types" aria-hidden="true"><span class="octicon octicon-link"></span></a>Change Types</h4>

<p>There are several different types of changes that jquery-domchange can listen for:</p>

<ul>
<li>attribute (html attributes like <code>href</code>)</li>
<li>children (nodes added and removed)</li>
<li>character data (inner content)</li>
</ul>

<p>By default, the plugin will listen for all three. However, if you only need to watch for specific types of changes, you can turn off the ones you don't need by disabling them when configuring the plugin:</p>

<div class="highlight highlight-js"><pre>$(<span class="pl-s1"><span class="pl-pds">"</span>#observable<span class="pl-pds">"</span></span>).on(<span class="pl-s1"><span class="pl-pds">"</span>domchange<span class="pl-pds">"</span></span>,
    {
        events<span class="pl-k">:</span> {
            attributes<span class="pl-k">:</span> <span class="pl-c1">true</span>,
            children<span class="pl-k">:</span> <span class="pl-c1">false</span>,
            characterData<span class="pl-k">:</span> <span class="pl-c1">true</span>
        }
    },
    <span class="pl-st">function</span>() {
        <span class="pl-c">// something happened to the DOM!    </span>
    }
);</pre></div>

<p>If you're listening to attribute changes, you can filter which attributes you care about by whitelisting them:</p>

<div class="highlight highlight-js"><pre>$(<span class="pl-s1"><span class="pl-pds">"</span>#observable<span class="pl-pds">"</span></span>).on(<span class="pl-s1"><span class="pl-pds">"</span>domchange<span class="pl-pds">"</span></span>,
    {
        attributeFilter<span class="pl-k">:</span> [<span class="pl-s1"><span class="pl-pds">'</span>href<span class="pl-pds">'</span></span>]
    },
    <span class="pl-st">function</span>() {
        <span class="pl-c">// something happened to the DOM!    </span>
    }
);</pre></div>

<p>(Note: if you set an <code>attributeFilter</code>, the browser will assume you want to listen to attribute events regardless of what other options you set, even in <code>events</code>.)</p>

<h4>
<a id="listening-to-descendents" class="anchor" href="#listening-to-descendents" aria-hidden="true"><span class="octicon octicon-link"></span></a>Listening to descendents</h4>

<p>You can also choose whether or not you want to listen to changes to the element's children as well. The plugin enables that functionality by default; however, you can disable it to save performance:</p>

<div class="highlight highlight-js"><pre>$(<span class="pl-s1"><span class="pl-pds">"</span>#observable<span class="pl-pds">"</span></span>).on(<span class="pl-s1"><span class="pl-pds">"</span>domchange<span class="pl-pds">"</span></span>,
    {
        descendents<span class="pl-k">:</span> <span class="pl-c1">false</span>
    },
    <span class="pl-st">function</span>() {
        <span class="pl-c">// something happened to the DOM!    </span>
    }
);</pre></div>

<h4>
<a id="recording-prior-values" class="anchor" href="#recording-prior-values" aria-hidden="true"><span class="octicon octicon-link"></span></a>Recording prior values</h4>

<p>When an element's attributes or character data changes, you can specically request the old value by configuring the plugin to remember it:</p>

<div class="highlight highlight-js"><pre>$(<span class="pl-s1"><span class="pl-pds">"</span>#observable<span class="pl-pds">"</span></span>).on(<span class="pl-s1"><span class="pl-pds">"</span>domchange<span class="pl-pds">"</span></span>,
    {
        recordPriorValues<span class="pl-k">:</span> {
            attributes<span class="pl-k">:</span> <span class="pl-c1">true</span>,
            characterData<span class="pl-k">:</span> <span class="pl-c1">true</span>
        }
    },
    <span class="pl-st">function</span>(<span class="pl-vpf">event</span>, <span class="pl-vpf">changes</span>) {
        <span class="pl-en">console</span><span class="pl-s3">.log</span>(changes[<span class="pl-c1">0</span>].oldValue);  
    }
);</pre></div>

<h3>
<a id="about" class="anchor" href="#about" aria-hidden="true"><span class="octicon octicon-link"></span></a>About</h3>

<h4>
<a id="credits" class="anchor" href="#credits" aria-hidden="true"><span class="octicon octicon-link"></span></a>Credits</h4>

<p>jquery-domchange was written in 2015 by Colby Rogness and is licensed under the GNU GPL 2 (provided with this software). The initial code was generated using <a href="http://jqueryboilerplate.com/">jQuery Boilerplate</a>, which is licensed under the <a href="http://zenorocha.mit-license.org/">MIT License</a>. <a href="http://stackoverflow.com/questions/2844565/is-there-a-jquery-dom-change-listener/11546242#11546242">This question</a> on StackOverflow as well as <a href="http://benalman.com/news/2010/03/jquery-special-events/">Ben Alman's overview of jQuery's special events system</a> proved very helpful in understanding the concepts that this plugin uses.</p>

<h4>
<a id="behind-the-scenes" class="anchor" href="#behind-the-scenes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Behind the scenes</h4>

<p>jquery-domchange uses jQuery's built-in special events system to handle <code>domchange</code> events.</p>

<p>When you bind to the <code>domchange</code> event, the plugin creates a handler object which is stored in the <a href="http://api.jquery.com/jquery.data/">jQuery data store</a>. The handler uses the <code>MutationObserver</code> feature native to Firefox and Chrome to fire <code>domchange</code> events when the DOM is modified.</p>

<p>If you pass configuration options when you bind your listener, then the handler object will map your options to the <code>MutationObserver</code> options.</p>

<p>Because watching for DOM changes is a resource-intensive process, jquery-domchange supports removing listeners as well (e.g. using <code>.off('domready')</code>). When you remove <code>domready</code> listeners, jquery-domchange retrives the handler that it created when you registered your listener and uses it to remove the <code>MutationObserver</code> to prevent memory leaks and improve performance.</p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/colbin8r/jquery-domchange/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/colbin8r/jquery-domchange/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/colbin8r/jquery-domchange"></a> is maintained by <a href="https://github.com/colbin8r">colbin8r</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-58356122-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
